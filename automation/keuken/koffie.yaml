---
- id: stroom_koffiezetapparaat_automatisch_aan
  alias: "[STROOM KOFFIEZETAPPARAAT] zet overdag aan bij beweging"
  description: >
    Wanneer er overdag beweging wordt gedetecteerd in de gang (deze
    sensor wordt niet door de kat getriggerd en ligt op de route naar de
    koffie), en daarna beweging in de keuken (af en toe door een
    aanrechtkat getriggerd), zet dan de stroom van het koffiezetapparaat aan.
  trigger:
    - platform: state
      entity_id: binary_sensor.gang_beweging
      to: 'on'
  condition:
    - condition: template
      value_template: >-
        {{ not is_state('sensor.periode_van_de_dag', 'nacht') }}
    # Honour the kitchen motion cooldown timer.
    - condition: state
      entity_id: timer.keuken_cooldown
      state: 'idle'
  action:
    - wait_template: >-
        {{ is_state("binary_sensor.keuken_beweging", "on") }}
      timeout: 00:01:00
      continue_on_timeout: 'false'
    - service: switch.turn_on
      data:
        entity_id: switch.stekker_koffiezetapparaat
